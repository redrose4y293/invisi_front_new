import{a as j,u as v,r as t,j as e}from"./index-Damo5oZI.js";import{a as w}from"./auth-Dx0bjMwJ.js";import"./api-DhFjHDpY.js";function S(){const[p]=j(),n=p.get("token")||"",g=v(),[o,i]=t.useState(n),[r,h]=t.useState(""),[d,m]=t.useState(""),[l,a]=t.useState(""),[u,c]=t.useState(!1),[x,f]=t.useState(!1);t.useEffect(()=>{i(n)},[n]);const b=async s=>{if(s.preventDefault(),a(""),!o){a("Invalid or missing token");return}if(r.length<6){a("Password must be at least 6 characters");return}if(r!==d){a("Passwords do not match");return}c(!0);try{await w(o,r),f(!0),setTimeout(()=>g("/auth/login"),1200)}catch{a("Reset failed. Please request a new link.")}finally{c(!1)}};return e.jsx("main",{style:{display:"grid",placeItems:"center",minHeight:"100vh",padding:24},children:e.jsxs("form",{onSubmit:b,style:{background:"#0E1621",padding:24,border:"1px solid #223",borderRadius:12,width:360,display:"grid",gap:12},children:[e.jsx("h1",{style:{margin:0,color:"var(--accent)"},children:"Reset Password"}),x?e.jsx("div",{style:{color:"#10B981"},children:"Password updated. Redirecting to login…"}):e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{style:{color:"#FF6B6B",fontSize:12},children:l}),e.jsxs("label",{children:["Token",e.jsx("input",{value:o,onChange:s=>i(s.target.value),placeholder:"Paste reset token",required:!0})]}),e.jsxs("label",{children:["New Password",e.jsx("input",{type:"password",value:r,onChange:s=>h(s.target.value),required:!0})]}),e.jsxs("label",{children:["Confirm Password",e.jsx("input",{type:"password",value:d,onChange:s=>m(s.target.value),required:!0})]}),e.jsx("button",{disabled:u,type:"submit",style:{padding:"10px 12px",border:"1px solid #334",borderRadius:8,background:"var(--accent)",color:"white"},children:u?"Updating…":"Update Password"})]})]})})}export{S as default};
